<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <style>
    html, body, #visualization {
      margin: 0;
      padding: 0;
      background-color: #1F1F1F;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
    }
    #controls {
      position: absolute;
      top: 10px;
      left: 10px;
    }
    #controls input {
      background-color: green;
      color: white;

    }
  </style>
</head>

<body>
  <canvas id="visualization"></canvas>
  <div id="controls">
    <input id="go" type="button" value="Go!" onclick="Go();" />
    <input id="more" type="button" value="More!" onclick="AddBody();" />
  </div>

  <script src="nBodySystem.js"></script> 
  <script>

    // Make a Web

    // Create our Web Worker.
    var worker = new Worker("worker.js");
    worker.onerror = function (evt) {
      console.log(`Error from Web Worker: ${evt.message}`);
    }
    worker.onmessage = function (evt) {
      alert(`Message from the Web Worker:\n\n ${evt.data}`);
    }

    // fetch() our wasm file and compile it.
    // Then post the compiled as a module 
    WebAssembly.compileStreaming(fetch("out/main.wasm"))
      .then(WasmModule =>
        worker.postMessage({ "MessagePurpose": "CompiledModule","WasmModule": WasmModule })
      );

    // Instantiate our simulation

    var sim = new nBodySimulation();

    function Start() {
      sim.start();
    }

    function AddBody() {
      sim.addBody();
    }
  </script>
</body>

</html>